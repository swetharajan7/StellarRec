<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Application | StellarRec</title>

  <!-- Roboto + Material Icons (optional) -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <style>
    :root{
      --brand-1:#1976d2; --brand-2:#7c4dff; --text:#0f172a; --muted:#475569;
      --panel:#ffffff; --border:#e5e7eb; --bg:#f7f9fc; --ok:#2e7d32; --ok-bg:#e8f5e9; --warn:#b00020;
      --shadow:0 12px 32px rgba(0,0,0,.10);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:'Roboto',system-ui,-apple-system,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--text)}

    /* Header */
    .header{background:linear-gradient(135deg,var(--brand-1),var(--brand-2));color:#fff;padding:1rem 1.25rem;box-shadow:0 4px 18px rgba(25,118,210,.35)}
    .header-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:1rem}
    .logo{display:inline-flex;align-items:center;gap:.5rem;color:#fff;text-decoration:none;font-weight:800;font-size:1.25rem}
    .badge{margin-left:.5rem;font-size:.75rem;background:#ffffff22;border:1px solid #ffffff55;color:#fff;border-radius:999px;padding:.15rem .55rem}

    /* Tabs */
    .tabs{max-width:1200px;margin:1.25rem auto 0;padding:0 1.25rem}
    .tablist{display:flex;gap:.5rem;flex-wrap:wrap}
    .tab{appearance:none;border:1px solid var(--border);background:#fff;color:#334; padding:.65rem .9rem;border-radius:10px;font-weight:600;cursor:pointer}
    .tab[aria-selected="true"]{border-color:#c7d7ff;background:#f5f8ff;color:#163}
    .tab .material-icons{font-size:18px;vertical-align:-4px;margin-right:.25rem}

    /* Panels */
    .container{max-width:1200px;margin:1rem auto;padding:0 1.25rem 2rem}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
    .card-hd{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid var(--border)}
    .card-tt{font-weight:800}
    .card-bd{padding:1.25rem}

    /* Success pill */
    .ok{display:inline-flex;align-items:center;gap:.35rem;background:var(--ok-bg);color:var(--ok);border:1px solid #c8e6c9;border-radius:999px;font-weight:700;font-size:.85rem;padding:.25rem .6rem}
    .ok .material-icons{font-size:18px}

    /* Button styles */
    .btn{display:inline-flex;align-items:center;gap:.5rem;border:none;border-radius:10px;cursor:pointer;font-weight:700}
    .btn-primary{background:linear-gradient(135deg,var(--brand-1),var(--brand-2));color:#fff;padding:.8rem 1rem}
    .btn-ghost{background:#fff;border:1px solid var(--border);padding:.7rem 1rem}
    .btn-danger{background:#ef5350;color:#fff;padding:.7rem 1rem}

    /* Grid in application panel */
    .row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    @media (max-width: 900px){ .row{grid-template-columns:1fr} }

    /* Simple uploader preview */
    .upload-ok{display:flex;align-items:center;gap:.75rem;background:var(--ok-bg);border:1px solid #c8e6c9;color:var(--ok);border-radius:12px;padding:.8rem 1rem;margin-top:.75rem}

    /* Modal */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.38);display:none;align-items:center;justify-content:center;z-index:1000}
    .overlay.show{display:flex}
    .modal{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 18px 50px rgba(0,0,0,.22);width:min(720px,94vw);max-width:720px}
    .modal-hd{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.1rem;border-bottom:1px solid var(--border)}
    .modal-tt{font-weight:800}
    .modal-bd{padding:1rem 1.1rem}
    .modal-ft{padding:1rem 1.1rem;border-top:1px solid var(--border);display:flex;gap:.5rem;justify-content:flex-end}

    .form{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
    .form.wide{grid-template-columns:1fr}
    .form .col-2{grid-column:1 / -1}
    label{font-size:.92rem;font-weight:700;color:#243}
    .input,.select,.textarea{width:100%;margin-top:.35rem;border:1px solid var(--border);border-radius:10px;padding:.7rem .8rem;font:inherit}
    .textarea{min-height:110px;resize:vertical}
    .err{color:#b00020;font-size:.85rem;margin-top:.25rem;display:none}
    .note{font-size:.85rem;color:#667;margin-top:.25rem}

    /* Toast */
    .toast-wrap{position:fixed;bottom:16px;right:16px;display:grid;gap:8px;z-index:1200}
    .toast{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 8px 28px rgba(0,0,0,.15);padding:.7rem .9rem;display:flex;gap:.5rem;align-items:flex-start}
    .toast .material-icons{font-size:18px;color:#334;margin-top:2px}
  </style>
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a class="logo" href="/" aria-label="Go to homepage">
        <span class="material-icons" aria-hidden="true">star</span> stellarrec
      </a>
      <span class="badge">Application Portal</span>
    </div>
  </header>

  <!-- Tabs -->
  <nav class="tabs" aria-label="Sections">
    <div role="tablist" class="tablist">
      <button class="tab" id="tab-application" role="tab" aria-selected="true" aria-controls="panel-application">
        <span class="material-icons" aria-hidden="true">assignment</span> Application
      </button>
      <button class="tab" id="tab-recos" role="tab" aria-selected="false" aria-controls="panel-recos">
        <span class="material-icons" aria-hidden="true">recommend</span> Recommendations
        <span id="recStatusPill" class="ok" style="display:none;margin-left:.5rem;">
          <span class="material-icons" aria-hidden="true">check_circle</span> Uploaded
        </span>
      </button>
    </div>
  </nav>

  <main class="container">
    <!-- Panel: Application -->
    <section class="card" id="panel-application" role="tabpanel" aria-labelledby="tab-application">
      <div class="card-hd">
        <div class="card-tt">Your Application</div>
        <button class="btn btn-primary" id="openAddRecBtn">
          <span class="material-icons" aria-hidden="true">person_add</span>
          Add a recommender
        </button>
      </div>
      <div class="card-bd">
        <div class="row">
          <div>
            <h3 style="margin:0 0 .35rem 0;">Résumé</h3>
            <input class="input" type="file" />
            <div class="note">PDF or DOCX.</div>
          </div>
          <div>
            <h3 style="margin:0 0 .35rem 0;">Statement of purpose</h3>
            <input class="input" type="file" />
            <div class="note">PDF recommended.</div>
          </div>
        </div>

        <div style="margin-top:1.25rem">
          <h3 style="margin:0 0 .35rem 0;">Recommendation</h3>
          <!-- demo success block — will be shown after “Send to recommender” -->
          <div id="recUploadOk" class="upload-ok" style="display:none;">
            <span class="material-icons" aria-hidden="true">check_circle</span>
            <div>
              <div style="font-weight:800">Recommendation uploaded successfully</div>
              <div style="font-size:.9rem;color:#476">Your recommender has submitted the letter. Thank you!</div>
            </div>
          </div>
          <div id="recUploadPending" class="note">No recommendation on file yet.</div>
        </div>
      </div>
    </section>

    <!-- Panel: Recommendations -->
    <section class="card" id="panel-recos" role="tabpanel" aria-labelledby="tab-recos" hidden>
      <div class="card-hd">
        <div class="card-tt">Recommendations</div>
        <button class="btn btn-ghost" id="openAddRecBtn2">
          <span class="material-icons" aria-hidden="true">person_add</span>
          Add a recommender
        </button>
      </div>
      <div class="card-bd">
        <p style="margin-top:0;color:#475569">
          Track your requests and received recommendations.
        </p>

        <div id="recList" style="display:grid;gap:.5rem"></div>
      </div>
    </section>
  </main>

  <!-- Modal: Add Recommender -->
  <div class="overlay" id="addRecOverlay" aria-hidden="true" role="dialog" aria-labelledby="addRecTitle">
    <div class="modal" role="document">
      <div class="modal-hd">
        <div id="addRecTitle" class="modal-tt">Add Recommender</div>
        <button class="btn btn-ghost" id="closeAddRecBtn" aria-label="Close">
          <span class="material-icons" aria-hidden="true">close</span>
        </button>
      </div>

      <form class="modal-bd form" id="addRecForm" novalidate>
        <div>
          <label for="prefix">Prefix</label>
          <select id="prefix" name="prefix" class="select">
            <option value="">—</option>
            <option>Dr.</option><option>Prof.</option><option>Mr.</option><option>Ms.</option><option>Mrs.</option>
          </select>
        </div>

        <div>
          <label for="firstName">First Name</label>
          <input id="firstName" name="firstName" class="input" required />
          <div class="err" id="firstErr">First name is required.</div>
        </div>

        <div>
          <label for="lastName">Last Name</label>
          <input id="lastName" name="lastName" class="input" required />
          <div class="err" id="lastErr">Last name is required.</div>
        </div>

        <div class="col-2">
          <label for="org">Organization</label>
          <input id="org" name="org" class="input" />
        </div>

        <div>
          <label for="title">Position/Title</label>
          <input id="title" name="title" class="input" />
        </div>

        <div>
          <label for="industry">Industry</label>
          <select id="industry" name="industry" class="select">
            <option value="">—</option>
            <option>Academia</option>
            <option>Technology</option>
            <option>Healthcare</option>
            <option>Finance</option>
            <option>Public sector</option>
            <option>Other</option>
          </select>
        </div>

        <div>
          <label for="relationship">Relationship</label>
          <input id="relationship" name="relationship" class="input" />
        </div>

        <div>
          <label for="phone">Telephone</label>
          <input id="phone" name="phone" class="input" inputmode="tel" />
        </div>

        <div class="col-2">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" class="input" autocomplete="email" required />
          <div class="err" id="emailErr">Please enter a valid email address.</div>
          <div class="note">Use your recommender’s institutional/corporate email. Free providers (Gmail, Hotmail, Yahoo) may be subject to extra review.</div>
        </div>

        <div class="col-2">
          <label for="message">Personal message to recommender</label>
          <textarea id="message" name="message" class="textarea" placeholder="Optional message…"></textarea>
        </div>
      </form>

      <div class="modal-ft">
        <button class="btn btn-primary" id="sendToRecBtn">
          <span class="material-icons" aria-hidden="true">send</span>
          Send To Recommender
        </button>
        <button class="btn btn-ghost" id="cancelRecBtn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Toast holder -->
  <div class="toast-wrap" id="toastWrap" aria-live="polite" aria-atomic="true"></div>

  <!-- JS (external to satisfy CSP) -->
  <script src="/assets/js/application.js" defer></script>
</body>
</html>

